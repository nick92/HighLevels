<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" type="text/css" href="style.css"> 
		<link href='http://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
		<title>High Levels - The home of river levels in the UK</title>
	</head>
	<body onload="run()">
		<h1 id="hl">High Levels</h1>
		<h3 id="title">The home of river levels in the UK</h3> 			
		<p id="user"></p>
		<div id="weather-box">
			<div id="icon"></div>
			<div id="location"></div>
			<div id="weather"></div>
			<div id="hourly"></div>
			<div id="time"></div>
			<div id="daily"></div>
		</div>
		<h3 id="nearYou" class="riverLevels">River Levels Near You</h3>
		<div id="favriv">
			
		</div>
		<h3 id="favorite" class="riverLevels" style="margin-top:80px;">Favorite Rivers</h3>
		<div id="favriv">
			
		</div>
		
		<div id="search-gr">
			<form action="" id="search-form">
				<fieldset>
					<input type="search" id="search" name="search" />
					<input type="submit" id="search-submit" value="Sub" />
				</fieldset>
			</form>
			<table style="width:300px" id="results">
				
			</table>
		</div>
		
		
		
		<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
		<script src="riverinfo.js"></script>
		<script>
			$(document).ready(function(){ 
				var rivArr;
				// Add the value of "Search..." to the input field and a class of .empty
				$("#search").val("Search...").addClass("empty");
				
				$.post("functions.php", {data:4}, function(data)
				{
					rivArr = data.split(",");
				});
				
				// When you click on #search
				$("#search").focus(function(){
					var i = 0;
					
					//search for river names based on key
					$("#search").keypress(function(data){
						var key = data.key;
						var river = rivArr[0];
						
						if(key == "Backspace")
						{
							if(i >= 0)
							{
								i--;
							}
						}
						else
						{
							i++;
						}
						
						$(rivArr).each(function(index){
							var river = rivArr[index];
							var reg = new RegExp(key);
							
							if(river !== undefined)
							{
								var test = reg.test();
								console.log(test);
								console.log(rivArr);
								console.log(i);
								/*
								if(key !== river[i])
								{
									rivArr.splice(index, 1);
								}*/
							}
						
						});
						
					});
					// If the value is equal to "Search..."
					if($(this).val() == "Search...") {
						// remove all the text and the class of .empty
						$(this).val("").removeClass("empty");;
					}
				});
				
				// When the focus on #search is lost
				$("#search").blur(function(){
					$( "#results" ).html("");
					// If the input field is empty
					if($(this).val() == "") {
						// Add the text "Search..." and a class of .empty
						$(this).val("Search...").addClass("empty");	
					}					
				});
			});
		</script>
	</body>
</html>
